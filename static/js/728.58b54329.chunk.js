/*! For license information please see 728.58b54329.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunktodo_list=self.webpackChunktodo_list||[]).push([[728],{1728:function(e,t,n){n.r(t),n.d(t,{default:function(){return L},generateTodoObj:function(){return C}});var o=n(9439),r=n(2791),i=r.createContext(),c=function(){return(0,r.useContext)(i)},d=n(6234),s=n(1413),a=n(408),l=n(4596),u=n(900);function f(){var e=(0,r.useState)([]),t=(0,o.Z)(e,2),n=t[0],i=t[1],c=(0,r.useState)(""),d=(0,o.Z)(c,2),f=d[0],m=d[1],p=(0,r.useState)(!1),x=(0,o.Z)(p,2),h=x[0],v=x[1],j=(0,l.E)().currentUser;return{readTodo:function(){v(!0),m("");var e=(0,a.iH)(u.Z,"users/".concat(j.uid,"/todos"));(0,a.jM)(e,(function(e){var t=e.val();i(function(e){if(!e)return[];var t=Object.entries(e).map((function(e){return(0,s.Z)((0,s.Z)({},e[1]),{},{key:e[0]})}));return t.sort((function(e,t){return e.order-t.order})),t}(t)),v(!1)}),(function(e){return m(e.message)}))},writeNewTodo:function(e){v(!0),m("");var t=(0,a.VF)((0,a.iU)((0,a.iH)(u.Z),"users/".concat(j.uid,"/todos"))).key,n={};return n["/users/".concat(j.uid,"/todos/").concat(t)]=e,(0,a.Vx)((0,a.iH)(u.Z),n).then(v(!1)).catch((function(e){return m(e.message)}))},updateTodo:function(e){v(!0),m(""),(0,a.t8)((0,a.iH)(u.Z,"users/".concat(j.uid,"/todos/").concat(e.key)),{action:e.action,completed:e.completed,order:e.order}).then(v(!1)).catch((function(e){return m(e.message)}))},deleteTodo:function(e){v(!0),m(""),(0,a.Od)((0,a.iH)(u.Z,"users/".concat(j.uid,"/todos/").concat(e.key))).then(v(!1)).catch((function(e){return m(e.message)}))},todoList:n,error:f,loading:h}}var m=n(184);var p=function(){var e=c(),t=f().deleteTodo,n=e.filter((function(e){return!0===e.completed}));return(0,m.jsx)("button",{className:"clear-completed",onClick:function(){n.forEach((function(e){t(e)}))},children:"Clear Completed"})},x=[{name:"All",is_completed:null},{name:"Active",is_completed:!1},{name:"Completed",is_completed:!0}];var h=function(e){var t=(0,r.useState)(x[0].name),n=(0,o.Z)(t,2),i=n[0],c=n[1],d=function(t){var n=t.target.textContent,o=x.find((function(e){return e.name===n})).is_completed;c(n),e.callFilterByStatus(o)};return(0,m.jsx)("ul",{className:"filter-list",children:x.map((function(e,t){return(0,m.jsx)("li",{onClick:d,className:i===e.name?"highlight":"",children:e.name},t)}))})};var v=function(e){return(0,m.jsx)("p",{children:"".concat(e.amount," items left")})};var j=function(e){var t=c().filter((function(e){return!1===e.completed}));return(0,m.jsxs)("div",{className:"main-footer__container",children:[(0,m.jsx)(v,{amount:t.length}),(0,m.jsx)(h,{callFilterByStatus:function(t){e.callFilterTodoList(t)}}),(0,m.jsx)(p,{})]})};var g=function(){var e=(0,r.useRef)(),t=c(),n=f(),o=n.writeNewTodo,i=n.error,d=n.loading;function s(){var n=function(){var n=e.current.value.trim();if(n){return C(n,t.length?t[0].order-1:0)}return}();n&&(i?console.log(i):(o(n),e.current.value=""))}return(0,m.jsxs)("div",{className:"new-todo__container",children:[(0,m.jsx)("div",{className:"submit-btn__wrap",onClick:s,children:(0,m.jsx)("button",{disabled:d,className:"submit-btn",children:(0,m.jsx)("label",{children:"add"})})}),(0,m.jsx)("input",{type:"text",className:"new-todo_input",autoFocus:!0,ref:e,placeholder:"Start typing here",onKeyPress:function(e){"Enter"===e.key&&s()}})]})},T=n(3433),Z=n(266);var b=function(e){var t=e.todo,n=f().updateTodo,o=t.completed&&(0,m.jsx)("img",{src:"./images/icon-check.svg",alt:"Completed"});return(0,m.jsx)("div",{className:"border-wrap ".concat(t.completed&&"completed-border-wrap"),onClick:function(){return n((0,s.Z)((0,s.Z)({},t),{},{completed:!t.completed}))},children:(0,m.jsx)("button",{className:"todo-icon ".concat(t.completed&&"completed-todo"),children:o})})};var k=function(e){var t=f().deleteTodo,n=e.todo,o=e.index,r=n.completed?(0,m.jsx)("s",{children:n.action}):n.action,i=function(){t(e.todo)};return(0,m.jsx)(Z._l,{draggableId:n.key.toString(),index:o,children:function(e){return(0,m.jsxs)("li",(0,s.Z)((0,s.Z)((0,s.Z)({id:n.key.toString(),className:"todo-item",ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:[(0,m.jsx)(b,{todo:n}),(0,m.jsx)("p",{children:r}),(0,m.jsx)("img",{alt:"delete",src:"./images/icon-cross.svg",className:"todo-delete",onClick:i})]}))}},n.key)};var y=function(e){var t=f().updateTodo;return(0,m.jsx)(Z.Z5,{onDragEnd:function(n){var o;if(!(e.filteredTodoList.length<=1)&&n.destination){var r=n.destination.index,i=r-1,c=r+1,d=e.filteredTodoList.splice(n.source.index,1);(o=e.filteredTodoList).splice.apply(o,[r,0].concat((0,T.Z)(d)));d[0].order=c===e.filteredTodoList.length?e.filteredTodoList[i].order+1:r>0?(e.filteredTodoList[c].order+e.filteredTodoList[i].order)/2:e.filteredTodoList[1].order-1,t(d[0])}},children:(0,m.jsx)(Z.bK,{droppableId:"todos",children:function(t){return(0,m.jsxs)("ul",(0,s.Z)((0,s.Z)({className:"todo-list"},t.droppableProps),{},{ref:t.innerRef,children:[e.filteredTodoList.map((function(e,t){return(0,m.jsx)(k,{todo:e,index:t},e.key)})),t.placeholder]}))}})})},N=n(886),C=function(e,t){return{completed:!1,action:e,order:t}};var L=function(){var e=f(),t=e.readTodo,n=e.updateTodo,c=e.todoList,s=e.error,a=e.loading,l=(0,r.useState)(null),u=(0,o.Z)(l,2),p=u[0],x=u[1];(0,r.useEffect)((function(){t()}),[]);var h=(0,r.useMemo)((function(){return c.filter((function(e){return null===p||e.completed===p}))}),[c,p]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(i.Provider,{value:c,children:s?(0,m.jsx)("p",{style:{color:"red",textAlign:"center"},children:s}):(0,m.jsxs)("main",{children:[(0,m.jsx)(d.Z,{children:(0,m.jsx)(g,{})}),a?(0,m.jsx)(N.Z,{}):(0,m.jsxs)(d.Z,{children:[(0,m.jsx)(y,{callUpdateTodo:n,filteredTodoList:h}),(0,m.jsx)(j,{callUpdateTodo:n,callFilterTodoList:function(e){return x(e)}})]})]})}),(0,m.jsx)("p",{className:"list-instructions",children:" Drag and drop to reorder list "})]})}}}]);
//# sourceMappingURL=728.58b54329.chunk.js.map